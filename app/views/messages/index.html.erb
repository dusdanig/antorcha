<% breadcrumb [@transaction, Message].compact %>

<%= render :partial => 'index' %>

<% content_for :sidebar do -%>
<h2>Berichten filteren </h2>

<ul>
	<li><%= link_to "Alle", messages_path(:search => nil) %></li>
	<li><%= link_to "Mijn rol(len)", roles_messages_path %></li>
  <li><%= link_to "Inkomende", messages_path(:search => {:inbox => true}) %></li>
  <li><%= link_to "Uitgaande", messages_path(:search => {:outbox => true}) %></li>
	<li><%= link_to "Verlopen", messages_path(:search => {:expired => true}) %></li>
	<li><%= link_to "Niet verlopen", messages_path(:search => {:unexpired => true}) %></li>
	<li><%= link_to "Gelezen", messages_path(:search => {:read => true}) %></li>
	<li><%= link_to "Ongelezen", messages_path(:search => {:unread => true}) %></li>
	<li><%= link_to "Geannuleerd", messages_path(:search => {:cancelled => true}) %></li>
</ul>


	<%# if current_user.roles.include? :advisor % >
		<h3>Filter op Definitie</h3>
		<ul>
		<% Definition.all.each do |definition| % >
			<li><%= link_to definition.title, messages_path(:search => {:with_definition => definition}) % ></li>
		<% end % >
		</ul>
		<h3>Filter op Transacties</h3>
		<ul>
			<li><%= link_to "Alles <small>(#{Message.count} berichten)</small", messages_path % ></li>
			<% Transaction.all.each do |transaction| % >
				<li><%= link_to "#{transaction.title} <small>(#{transaction.messages.count} berichten)</small>", transaction_messages_path(transaction) % ></li>
			<% end % >
		</ul>
	<% end #%>


<% end -%>

<%= will_paginate @messages %>
